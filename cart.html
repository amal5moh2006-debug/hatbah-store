<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:Cairo;
  background:#f9f7f4;
  padding:20px
}

.container{
  max-width:500px;
  margin:auto;
  background:white;
  padding:20px;
  border-radius:12px
}

.item{
  display:flex;
  gap:10px;
  margin-bottom:12px;
  align-items:center;
  border-bottom:1px solid #eee;
  padding-bottom:10px
}

.item img{
  width:60px;
  height:60px;
  border-radius:8px;
  object-fit:cover
}

.item-info{
  flex:1
}

.remove{
  background:#8b263e;
  color:white;
  border:none;
  border-radius:50%;
  width:28px;
  height:28px;
  cursor:pointer;
  font-size:14px
}

button.main{
  background:#8b263e;
  color:white;
  border:none;
  padding:10px;
  border-radius:8px;
  cursor:pointer;
  width:100%;
  margin-top:15px
}

#total{
  font-weight:bold;
  text-align:center;
  margin-top:15px
}
</style>
</head>

<body>

<div class="container">
  <h2 style="text-align:center">Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</h2>

  <div id="items"></div>

  <p id="total"></p>
<label style="font-weight:bold;margin-top:15px;display:block">
  ØªØ¹Ù„ÙŠÙ‚ Ø£Ùˆ Ø·Ù„Ø¨ Ø®Ø§Øµ:
</label>
<textarea id="note"
  placeholder="Ù…Ø«Ø§Ù„: Ù„ÙˆÙ† Ù…Ø®ØªÙ„ÙØŒ ØªØºÙ„ÙŠÙ Ù‡Ø¯ÙŠØ©ØŒ Ù…ÙˆØ¹Ø¯ ØªÙˆØµÙŠÙ„..."
  style="
    width:100%;
    padding:8px;
    border-radius:8px;
    border:1px solid #ccc;
    margin-top:5px;
    resize:vertical;
  ">
</textarea>

<label style="font-weight:bold;margin-top:15px;display:block">
  Ø¥Ø±ÙØ§Ù‚ ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):
</label>
<input type="file" id="image"
  accept="image/*"
  style="margin-top:5px">

  <button class="main" onclick="send()">Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
</div>

<script>
function renderCart(){
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  let div = document.getElementById("items");
  let total = 0;

  div.innerHTML = "";

  if(cart.length === 0){
    div.innerHTML = "<p style='text-align:center'>Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p>";
    document.getElementById("total").innerText = "";
    return;
  }

  cart.forEach((i,index)=>{
    total += i.price;
    div.innerHTML += `
      <div class="item">
        <img src="${i.image}">
        <div class="item-info">
          <strong>${i.name}</strong><br>
          ${i.price} Ø±.Ø¹
        </div>
        <button class="remove" onclick="removeItem(${index})">âœ–</button>
      </div>
    `;
  });

  document.getElementById("total").innerText =
    "Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: " + total + " Ø±.Ø¹";
}

function removeItem(index){
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  cart.splice(index,1);
  localStorage.setItem("cart", JSON.stringify(cart));
  renderCart();
}

function send(){
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  if(cart.length === 0){
    alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");
    return;
  }

  let note = document.getElementById("note").value;
  let imageAttached = document.getElementById("image").files.length > 0;

  let total = 0;
  let msg = "Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯:%0A";

  cart.forEach(i=>{
    total += i.price;
    msg += i.name + " - " + i.price + " Ø±.Ø¹%0A";
  });

  msg += "%0AØ§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: " + total + " Ø±.Ø¹";

  if(note.trim() !== ""){
    msg += "%0A%0AÙ…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„:%0A" + encodeURIComponent(note);
  }

  if(imageAttached){
    msg += "%0A%0AğŸ“ ÙŠÙˆØ¬Ø¯ ØµÙˆØ±Ø© Ù…Ø±ÙÙ‚Ø© Ù…Ø¹ Ø§Ù„Ø·Ù„Ø¨";
  }

  // ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨
  window.open("https://wa.me/96877159550?text=" + msg);

  // Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­ + Ø´ÙƒØ±
  setTimeout(()=>{
    alert(
      "âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­\n\n" +
      "Ù†Ø´ÙƒØ±Ùƒ Ø¹Ù„Ù‰ Ø«Ù‚ØªÙƒ Ø¨Ù†Ø§ ğŸŒ¿\n" +
      "Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ù‹Ø§"
    );

    // ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø©
    localStorage.removeItem("cart");

    // Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    window.location.href = "index.html";
  }, 500);
}

renderCart();
</script>


</body>
</html>
