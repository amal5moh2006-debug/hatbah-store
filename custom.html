<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>خِدمة نفِّذ| حطبه</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:Cairo;
  background:#f9f7f4;
  padding:20px;
}
.box{
  max-width:600px;
  margin:auto;
  background:white;
  padding:25px;
  border-radius:15px;
  box-shadow:0 4px 15px rgba(0,0,0,.1);
}
h2{
  text-align:center;
  color:#8b263e;
}
input,textarea,button{
  width:100%;
  margin-top:10px;
  padding:12px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:14px
}
button{
  background:#8b263e;
  color:white;
  border:none;
  cursor:pointer;
  font-weight:bold;
  transition:.2s;
}
button:hover{
  transform:scale(1.02);
}
</style>
</head>

<body>

<div class="box">
  <h2>خِدمة نفِّذ</h2>
  <img src="images/NF2.png" alt="شرح الخدمة" style="width:100%;border-radius:10px;margin-top:15px;">

  <input id="name" placeholder="اسمك">
  <input id="phone" placeholder="رقم التواصل">
  <textarea id="idea" rows="4" placeholder="اشرح فكرتك"></textarea>
  <input type="file" id="img" accept="image/*">
  <img id="preview" alt="معاينة الصورة" style="width:100%;margin-top:15px;border-radius:8px;display:none;">

  <button onclick="send()">إرسال الطلب</button>
</div>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

<script>
// ===== إعداد Firebase =====
const firebaseConfig = {
  apiKey: "AIzaSyAKrYrlNkIJioq3Eh5G6A4ZzHpgTZW1wn4",
  authDomain: "hatbah-orders.firebaseapp.com",
  projectId: "hatbah-orders",
  storageBucket: "hatbah-orders.appspot.com",
  messagingSenderId: "660907871957",
  appId: "1:660907871957:web:ef500ea318d495c9f11c5c"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// ===== معاينة الصورة محليًا فقط =====
document.getElementById("img").addEventListener("change", function(e){
  const file = e.target.files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = function(event){
      const preview = document.getElementById("preview");
      preview.src = event.target.result;
      preview.style.display = "block";
    }
    reader.readAsDataURL(file);
  }
});

// ===== دالة إرسال الطلب =====
async function send(){
  let name = document.getElementById("name").value.trim();
  let phone = document.getElementById("phone").value.trim();
  let idea = document.getElementById("idea").value.trim();

  if(name=="" || phone=="" || idea==""){
    alert("يرجى تعبئة جميع الحقول الأساسية");
    return;
  }

  // حفظ البيانات في Firestore فقط (بدون رفع الصور)
  await db.collection("orders").add({
    name,
    phone,
    idea,
    created: new Date()
  });

  alert("✅ تم إرسال طلبك بنجاح");

  // تفريغ الحقول
  document.getElementById("name").value = "";
  document.getElementById("phone").value = "";
  document.getElementById("idea").value = "";
  document.getElementById("img").value = "";
  document.getElementById("preview").style.display = "none";
}
</script>

</body>
</html>
